<link rel="import" href="../../packages/polymer/polymer.html">
<link rel="import" href="../../packages/paper_elements/paper_progress.html">
<link rel="import" href="../../packages/paper_elements/paper_icon_button.html">
<link rel="import" href="../../packages/core_elements/core_icons.html">
<link rel="import" href="iz_ellipsis.html">

<polymer-element name="iz-output">
  <template>
  <style>
      :host{
          display: block;

          -webkit-animation: pop .6s ease-out 0 1 normal; /* Chrome, Safari, Opera */
          animation: pop .6s ease-out 0 1 normal;
          -webkit-animation-fill-mode: forwards; /* Chrome, Safari, Opera */
          animation-fill-mode: forwards;
      }

      /* Chrome, Safari, Opera */
      @-webkit-keyframes pop {
          from {margin-left: -50px;
          width: 0px;}
          to {margin-left: 0px;
          width: 360px;}
      }

      /* Standard syntax */
      @keyframes pop {
          from {margin-left: -50px;
              width: 0px;}
          to {margin-left: 0px;
              width: 360px;}
      }

      .outputError #status{
          color: #ff7043;
      }

      .outputError paper-progress::shadow #activeProgress {
          background-color: #ff7043;
      }

      .outputError paper-progress::shadow #secondaryProgress {
          background-color: #ffcbb3;
      }

      .outputCancel #status{
          color: #312e2e;
      }

      .outputCancel paper-progress::shadow #activeProgress {
          background-color: #312e2e;
      }

      .outputCancel paper-progress::shadow #secondaryProgress {
          background-color: #7d7f7d;
      }
  </style>
  <div class="{{context.status_id == 0 ? 'outputCancel':''}} {{context.status_id == 5 ? 'outputError':''}}" style="background-color:white; display: flex; flex-direction: row; padding: 10px; min-height: 50px;  color: #666; border-radius: 2px; margin: 10px 0 ">
      <div vertical around-justified layout center flex>
          <div style="font-size: 0.75em">{{context.filename}}</div>
          <paper-progress value="{{context.progress}}" secondaryprogress="{{context.preprogress}}" style="width: 100%;"></paper-progress>
          <div id="status" style="font-size:0.7em;"><b>{{context.status}}<iz-ellipsis hidden?="{{context.status_id==0 || context.status_id==4 ||context.status_id==5}}"></iz-ellipsis></b> {{context.details}}</div>
      </div>
      <paper-icon-button style="align-self: center" icon="{{context.status_id==4?'file-download':'cancel'}}" role="button" tabindex="0" aria-label="arrow-back" disabled?="{{context.status_id==0||context.status_id==5}}" on-click="{{CancelORDownloadClicked}}"></paper-icon-button>
  </div>

  </template>
  <script type="application/dart" src="iz_output.dart"></script>
</polymer-element>
